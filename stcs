

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

local zone = workspace.Terrain.Spawn:FindFirstChild("SafePlate")
if not zone then return end

local ZonePos = zone.Position
local ZoneSize = zone.Size
local area = Vector3.new(ZoneSize.X, 0, ZoneSize.Z) / 2

local XZ = {
	minX = ZonePos.X - area.X,
	maxX = ZonePos.X + area.X,
	minZ = ZonePos.Z - area.Z,
	maxZ = ZonePos.Z + area.Z
}

local toggle = true

local UpdateCamAim = function()
	if not toggle then return end
	
	local character = player.Character
	local rootpart = character and character:FindFirstChild("HumanoidRootPart")
	local humanoid = character and character:FindFirstChild("Humanoid")
	
	if not character or not rootpart or not humanoid then return end

	local position = rootpart.Position
	if position.X >= XZ.minX and position.X <= XZ.maxX and position.Z >= XZ.minZ and position.Z <= XZ.maxZ then return end

	for _, Player in pairs(Players:GetPlayers()) do
		if Player.Name ~= player.Name then

			local otherchar = Player.Character
			local otherroot = otherchar and otherchar:FindFirstChild("HumanoidRootPart")
			local otherhum = otherchar and otherchar:FindFirstChild("Humanoid")
			
			if not otherchar or not otherroot or not otherhum then continue end
			
			if otherhum.Health <= 0 then continue end
			if humanoid.Health <= 0 then return end

			if otherroot then
				local distance = (otherroot.Position - rootpart.Position).Magnitude
				
				if distance <= 15 then
					local RightArm = otherchar and otherchar:FindFirstChild("Right Arm")
					if not RightArm then continue end
					
					local direction = Vector3.new(RightArm.Position.X - otherroot.Position.X, 0, RightArm.Position.Z - otherroot.Position.Z).Unit
					local NewCFrame = CFrame.new(camera.CFrame.Position, otherroot.Position + direction)

					camera.CFrame = NewCFrame
				end
			end
		end
	end
end

RunService.Heartbeat:Connect(function()
	UpdateCamAim()
end)
